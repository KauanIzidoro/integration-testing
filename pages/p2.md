# Quando usar testes de integração e quando usar ou não usar 'mocks'?

Testes de integração são usados para validar a interação entre componentes do sistema, especialmente quando envolvem sistemas externos, como bancos de dados ou APIs. 

- **Mocks**: são úteis para isolar dependências e testar partes específicas do sistema, sem depender de componentes externos. No entanto, se o objetivo for testar a comunicação real, como uma operação de banco de dados ou uma API externa, não se deve usar mocks. 

# Quando não usar mocks?

O primeiro passo para que um teste deixe de ser exclusivamente de unidade e passe a ser de integração é **não usar mocks** e passar dependências concretas para a classe sob teste. Muitos desenvolvedores defendem que um bom teste nunca faz uso de mocks, argumentando que os mocks podem "esconder" problemas que só seriam detectados em um teste de integração. Esse é o ponto central na discussão entre testes de unidade e testes de integração: a questão não é se devemos ou não usar mocks, mas sim **quando ou não usá-los**.

Veja, por exemplo, um dos testes implementados para a calculadora de salário:

```java
@Test
public void deveCalcularSalarioParaDesenvolvedoresComSalarioAbaixoDoLimite() {
    CalculadoraDeSalario calculadora = new CalculadoraDeSalario();
    Funcionario desenvolvedor = new Funcionario("Mauricio", 1500.0, Cargo.DESENVOLVEDOR);
    double salario = calculadora.calculaSalario(desenvolvedor);
    assertEquals(1500.0 * 0.9, salario, 0.00001);
}
```
Esse teste garante o comportamento da classe `CalculadoraDeSalario`. Idealmente, gostaríamos de testá-la de forma independente do comportamento das outras classes. 

Mas veja que, no teste, instanciamos um `Funcionario`. Usamos a classe concreta e não fizemos uso de mock. **Por quê?**

Geralmente, classes que representam entidades, serviços, utilitários, ou qualquer outra coisa que interage com a infraestrutura, **não são mockadas**. Elas são classes reais que fazem parte do comportamento do sistema e devem ser testadas de forma concreta.

